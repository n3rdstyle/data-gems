<!DOCTYPE html>
<html>
<head>
    <title>Data Gems Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .step { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .step h3 { margin-top: 0; color: #333; }
        code { background: #f5f5f5; padding: 2px 6px; border-radius: 3px; }
        .highlight { background: yellow; }
    </style>
</head>
<body>
    <h1>🔍 Data Gems Subprofile Debug Test</h1>
    
    <div class="step">
        <h3>Step 1: Install the Extension</h3>
        <p>Load the extension in Chrome developer mode from: <code>/Users/d.breuer/Desktop/Data Gems/data-gems-v1/</code></p>
    </div>

    <div class="step">
        <h3>Step 2: Add Context Items</h3>
        <p>1. Click the extension icon</p>
        <p>2. Add at least 2-3 context items (e.g., "Favorite food: Pizza", "Hobbies: Reading")</p>
        <p>3. Note the data is saved</p>
    </div>

    <div class="step">
        <h3>Step 3: Create Subprofile</h3>
        <p>1. Click the "+" button next to the profile selector</p>
        <p>2. Name your subprofile (e.g., "Test Profile")</p>
        <p>3. <span class="highlight">Select at least 1-2 of your context items</span></p>
        <p>4. Create the subprofile</p>
    </div>

    <div class="step">
        <h3>Step 4: Test Filtering</h3>
        <p>1. Switch to your new subprofile in the dropdown</p>
        <p>2. <span class="highlight">Check if only selected items are shown</span></p>
        <p>3. Switch back to "Full Profile" to see all items</p>
    </div>

    <div class="step">
        <h3>Step 5: Check Debug Logs</h3>
        <p>1. Open browser console (F12)</p>
        <p>2. Look for logs with emojis: 🔍, 📋, 💾, 🎯, ✅, ❌</p>
        <p>3. Pay attention to:</p>
        <ul>
            <li><code>Selected contextItems:</code> - Are item IDs captured during creation?</li>
            <li><code>Subprofile has contextItems field:</code> - Are they saved in the subprofile?</li>
            <li><code>Filtered items:</code> - How many items pass the filter?</li>
        </ul>
    </div>

    <div class="step">
        <h3>Expected Debug Output</h3>
        <p>When creating a subprofile, you should see:</p>
        <pre>🔧 Creating subprofile with data: {contextItems: ["item-id-1", "item-id-2"]}
📊 Selected contextItems: ["item-id-1", "item-id-2"]</pre>
        
        <p>When switching to subprofile:</p>
        <pre>🔍 Filtering for subprofile: subprofile-id
✅ Subprofile has contextItems field: ["item-id-1", "item-id-2"]
🎯 Filtered items: 2</pre>
    </div>

    <div class="step">
        <h3>Troubleshooting</h3>
        <p><strong>If no items show when subprofile is selected:</strong></p>
        <ul>
            <li>Check if <code>Selected contextItems</code> shows item IDs during creation</li>
            <li>Check if <code>Subprofile has contextItems field</code> shows the IDs after switching</li>
            <li>Verify item IDs match between available items and subprofile field</li>
        </ul>
    </div>

    <script>
        console.log("🧪 Debug test page loaded. Follow the steps above to test Data Gems subprofile filtering.");
    </script>
</body>
</html>